const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : New York USA, for 1 Days and 1 Night for Family with a Luxury budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time to travel each of the location for 1 days and 1 night with each day plan with best time to visit, my travel plan details(destination,duration,budget,traveler_details...etc) in JSON format\n\n{\n  \"travel_plan\": {\n    \"destination\": \"New York, USA\",\n    \"duration\": \"1 day, 1 night\",\n    \"budget\": \"Luxury\",\n    \"traveler_details\": {\n      \"adults\": 2,\n      \"children\": 0,\n      \"special_requests\": \"None\"\n    },\n    \"flight_details\": [\n      {\n        \"airline\": \"United Airlines\",\n        \"flight_number\": \"UA123\",\n        \"departure_airport\": \"San Francisco International Airport (SFO)\",\n        \"arrival_airport\": \"Newark Liberty International Airport (EWR)\",\n        \"departure_time\": \"2024-12-10T12:00:00Z\",\n        \"arrival_time\": \"2024-12-10T17:00:00Z\",\n        \"flight_price\": \"$350\",\n        \"booking_url\": \"https://www.united.com/\"\n      }\n    ],\n    \"hotels\": [\n      {\n        \"hotel_name\": \"The Plaza Hotel\",\n        \"hotel_address\": \"768 5th Ave, New York, NY 10019, USA\",\n        \"price\": \"$1500\",\n        \"hotel_image_url\": \"https://www.theplazany.com/images/default-source/hotel-images/the-plaza-hotel-new-york-exterior.jpg?sfvrsn=94387c95_4\",\n        \"geo_coordinates\": [40.767043, -73.978511],\n        \"rating\": 4.5,\n        \"description\": \"A luxurious landmark hotel in the heart of Manhattan, offering elegant rooms, fine dining, and world-class service.\",\n        \"places_to_visit_nearby\": [\n          {\n            \"place_name\": \"Central Park\",\n            \"place_details\": \"A sprawling urban park with iconic attractions like the Bethesda Terrace and the Central Park Zoo.\",\n            \"place_image_url\": \"https://www.centralparknyc.org/sites/default/files/styles/hero_image/public/2019-12/central_park_winter_2019_hero.jpg?itok=8jY-i52r\",\n            \"geo_coordinates\": [40.785091, -73.968285],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"15 minutes\"\n          },\n          {\n            \"place_name\": \"The Metropolitan Museum of Art\",\n            \"place_details\": \"One of the world's largest and finest art museums, housing a vast collection of masterpieces from around the globe.\",\n            \"place_image_url\": \"https://www.metmuseum.org/sites/default/files/styles/met_homepage_slideshow/public/2023-11/2023_11_24_met_5th_avenue_building_exterior_daytime_wide_0.jpg?itok=y525vXgI\",\n            \"geo_coordinates\": [40.779440, -73.963215],\n            \"ticket_pricing\": \"Suggested donation: $25\",\n            \"time_to_travel\": \"20 minutes\"\n          }\n        ]\n      },\n      {\n        \"hotel_name\": \"The St. Regis New York\",\n        \"hotel_address\": \"2 E 55th St, New York, NY 10022, USA\",\n        \"price\": \"$1200\",\n        \"hotel_image_url\": \"https://www.marriott.com/marriott/media/images/global/hotels/nycsr/nycsr-exterior-hotel-736h.jpg\",\n        \"geo_coordinates\": [40.760685, -73.976526],\n        \"rating\": 4.7,\n        \"description\": \"A historic luxury hotel known for its elegant rooms, world-class dining, and legendary service.\",\n        \"places_to_visit_nearby\": [\n          {\n            \"place_name\": \"Rockefeller Center\",\n            \"place_details\": \"A famous entertainment complex featuring the iconic Rockefeller Center Christmas Tree and the Top of the Rock observation deck.\",\n            \"place_image_url\": \"https://www.rockefellercenter.com/sites/rockefellercenter/files/styles/hero_image/public/2022-06/rockefeller-center-fountain-summer-daytime-wide-0.jpg?itok=bJ979a5o\",\n            \"geo_coordinates\": [40.758635, -73.979070],\n            \"ticket_pricing\": \"Varies\",\n            \"time_to_travel\": \"10 minutes\"\n          },\n          {\n            \"place_name\": \"St. Patrick's Cathedral\",\n            \"place_details\": \"A majestic Neo-Gothic cathedral known for its stunning architecture and stained glass windows.\",\n            \"place_image_url\": \"https://www.stpatrickscathedral.org/sites/default/files/styles/gallery_full/public/2019-03/st-patricks-cathedral-exterior-3.jpg?itok=80u_f25C\",\n            \"geo_coordinates\": [40.761432, -73.977401],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"5 minutes\"\n          }\n        ]\n      }\n    ],\n    \"itinerary\": [\n      {\n        \"day\": 1,\n        \"activities\": [\n          {\n            \"activity\": \"Check in to the hotel\",\n            \"time\": \"12:00 PM\"\n          },\n          {\n            \"activity\": \"Lunch at The Palm Court\",\n            \"time\": \"1:00 PM\"\n          },\n          {\n            \"activity\": \"Visit Central Park\",\n            \"time\": \"2:00 PM\"\n          },\n          {\n            \"activity\": \"Dinner at The Grill\",\n            \"time\": \"7:00 PM\"\n          },\n          {\n            \"activity\": \"Enjoy a show at Broadway\",\n            \"time\": \"8:00 PM\"\n          }\n        ]\n      },\n      {\n        \"day\": 2,\n        \"activities\": [\n          {\n            \"activity\": \"Breakfast at The Palm Court\",\n            \"time\": \"9:00 AM\"\n          },\n          {\n            \"activity\": \"Visit The Metropolitan Museum of Art\",\n            \"time\": \"10:00 AM\"\n          },\n          {\n            \"activity\": \"Lunch at The Loeb Boathouse\",\n            \"time\": \"1:00 PM\"\n          },\n          {\n            \"activity\": \"Check out of the hotel\",\n            \"time\": \"2:00 PM\"\n          },\n          {\n            \"activity\": \"Head to the airport for your return flight\",\n            \"time\": \"3:00 PM\"\n          }\n        ]\n      }\n    ]\n  }\n}"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"travel_plan\": {\n    \"destination\": \"New York, USA\",\n    \"duration\": \"1 day, 1 night\",\n    \"budget\": \"Luxury\",\n    \"traveler_details\": {\n      \"adults\": 2,\n      \"children\": 0,\n      \"special_requests\": \"None\"\n    },\n    \"flight_details\": [\n      {\n        \"airline\": \"Delta Air Lines\", \n        \"flight_number\": \"DL4567\", \n        \"departure_airport\": \"Placeholder - Replace with your Departure Airport (e.g., LAX)\",\n        \"arrival_airport\": \"John F. Kennedy International Airport (JFK)\",\n        \"departure_time\": \"2024-03-08T10:00:00Z\", \n        \"arrival_time\": \"2024-03-08T13:00:00Z\", \n        \"flight_price\": \"Placeholder -  Replace with actual price (e.g., $800)\",\n        \"booking_url\": \"https://www.delta.com/\" \n      }\n    ],\n    \"hotels\": [\n      {\n        \"hotel_name\": \"The Peninsula New York\",\n        \"hotel_address\": \"700 Fifth Ave, New York, NY 10019, USA\",\n        \"price\": \"$1800\",\n        \"hotel_image_url\": \"https://peninsula.com/en/new-york/images/hotel-image/peninsula-new-york-exterior-hero-image.jpg\",\n        \"geo_coordinates\": [40.7668, -73.9763],\n        \"rating\": 4.8,\n        \"description\": \"A luxurious hotel offering stunning city views, Michelin-starred dining, and impeccable service.\",\n        \"places_to_visit_nearby\": [\n          {\n            \"place_name\": \"Central Park\",\n            \"place_details\": \"A large urban park with walking paths, the Bethesda Fountain, and Strawberry Fields.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Central_Park_from_the_air.jpg/1280px-Central_Park_from_the_air.jpg\",\n            \"geo_coordinates\": [40.7829, -73.9654],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"10 minutes\"\n          },\n          {\n            \"place_name\": \"Museum of Modern Art (MoMA)\",\n            \"place_details\": \"World-renowned museum showcasing modern and contemporary art.\",\n            \"place_image_url\": \"https://www.moma.org/images/collection/e1/e1979-6346_IR.jpg\",\n            \"geo_coordinates\": [40.7614, -73.9778],\n            \"ticket_pricing\": \"$25\",\n            \"time_to_travel\": \"15 minutes\"\n          }\n        ]\n      },\n      {\n        \"hotel_name\": \"The Ritz-Carlton New York, Central Park\",\n        \"hotel_address\": \"50 Central Park South, New York, NY 10019, USA\",\n        \"price\": \"$1600\",\n        \"hotel_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/1a/26/09/d0/the-ritz-carlton-new.jpg\",\n        \"geo_coordinates\": [40.7664, -73.9769],\n        \"rating\": 4.7,\n        \"description\": \"Luxury hotel with stunning Central Park views, sophisticated dining options, and exceptional service.\",\n        \"places_to_visit_nearby\": [\n          {\n            \"place_name\": \"Columbus Circle\",\n            \"place_details\": \"A bustling transportation hub and shopping area.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Columbus_Circle_from_Central_Park_South.jpg/1280px-Columbus_Circle_from_Central_Park_South.jpg\",\n            \"geo_coordinates\": [40.7680, -73.9804],\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"5 minutes\"\n          },\n          {\n            \"place_name\": \"Carnegie Hall\",\n            \"place_details\": \"A world-famous concert hall hosting classical music performances.\",\n            \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Carnegie_Hall_Exterior.jpg/1280px-Carnegie_Hall_Exterior.jpg\",\n            \"geo_coordinates\": [40.7645, -73.9769],\n            \"ticket_pricing\": \"Varies by event\",\n            \"time_to_travel\": \"10 minutes\"\n          }\n        ]\n      }\n    ],\n    \"itinerary\": [\n      {\n        \"day\": 1,\n        \"activities\": [\n          {\n            \"activity\": \"Arrive at JFK, transfer to hotel (taxi or pre-booked car service)\",\n            \"time\": \"1:00 PM - 2:00 PM\"\n          },\n          {\n            \"activity\": \"Check in to hotel\",\n            \"time\": \"2:00 PM\"\n          },\n          {\n            \"activity\": \"Afternoon Tea at hotel (optional)\",\n            \"time\": \"3:00 PM - 4:00 PM\"\n          },\n          {\n            \"activity\": \"Explore Central Park\",\n            \"time\": \"4:00 PM - 6:00 PM\"\n          },\n          {\n            \"activity\": \"Luxury Dinner at a Michelin-starred restaurant (e.g., Per Se)\",\n            \"time\": \"7:30 PM - 9:30 PM\"\n          }\n        ]\n      },\n      {\n        \"day\": 2,\n        \"activities\": [\n          {\n            \"activity\": \"Breakfast at hotel\",\n            \"time\": \"8:00 AM\"\n          },\n          {\n            \"activity\": \"Visit MoMA or another museum of your choice\",\n            \"time\": \"9:00 AM - 12:00 PM\"\n          },\n          {\n            \"activity\": \"Lunch at a high-end restaurant near the museum\",\n            \"time\": \"12:00 PM - 1:00 PM\"\n          },\n          {\n            \"activity\": \"Check out of hotel\",\n            \"time\": \"1:00 PM\"\n          },\n          {\n            \"activity\": \"Transfer to JFK for departure\",\n            \"time\": \"2:00 PM - 4:00 PM\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n\n**Important Notes:**\n\n* **Placeholders:**  Many fields (flight details, prices, specific restaurant names) are placeholders. You MUST replace these with actual information based on your travel dates, preferred airline, hotel availability, and restaurant choices.\n* **Flight Booking:** Flight prices and availability change constantly.  Use the provided airline links to search for flights on your desired dates.\n* **Hotel Bookings:** Similarly, hotel prices and availability are dynamic. Use online travel agencies (OTA's) like Expedia, Booking.com, etc., or the hotel's website directly to check prices and availability.  Hotel images can also be easily found via Google Image Search.\n* **Restaurant Reservations:**  For high-end dining, making reservations well in advance (weeks or even months) is essential, especially during peak season.\n* **Transportation:** The itinerary assumes you'll use taxis or ride-sharing services (or pre-booked car services) for transportation. Consider costs when budgeting.\n* **Museum Tickets:**  Purchase museum tickets in advance online to save time and potentially money.\n* **Flexibility:** This is a suggested itinerary. Feel free to adjust based on your family's preferences and interests.  Consider adding activities like a Broadway show or a shopping trip if time allows.\n\n\nRemember to thoroughly research and book flights and accommodation well before your trip to secure the best deals and availability.  Enjoy your luxurious New York experience!\n"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
  
  