const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
            role: "user",
            parts: [
              {text: "Generate Travel Plan for Location : United Kingdom, for 1 Days and 1 Night for Family with a Luxury budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time to travel each of the location for 1 days and 1 night with each day plan with best time to visit in JSON format\n\nexample-\n\n{\n  \"flight_details\": [\n    {\n      \"airline\": \"United Airlines\",\n      \"flight_number\": \"UA123\",\n      \"departure_airport\": \"San Francisco International Airport (SFO)\",\n      \"arrival_airport\": \"Newark Liberty International Airport (EWR)\",\n      \"departure_time\": \"2024-12-10T12:00:00Z\",\n      \"arrival_time\": \"2024-12-10T17:00:00Z\",\n      \"flight_price\": \"$350\",\n      \"booking_url\": \"https://www.united.com/\"\n    }\n  ],\n  \"hotels\": [\n    {\n      \"hotel_name\": \"The Plaza Hotel\",\n      \"hotel_address\": \"768 5th Ave, New York, NY 10019, USA\",\n      \"price\": \"$1500\",\n      \"hotel_image_url\": \"https://www.theplazany.com/images/default-source/hotel-images/the-plaza-hotel-new-york-exterior.jpg?sfvrsn=94387c95_4\",\n      \"geo_coordinates\": [40.767043, -73.978511],\n      \"rating\": 4.5,\n      \"description\": \"A luxurious landmark hotel in the heart of Manhattan, offering elegant rooms, fine dining, and world-class service.\",\n      \"places_to_visit_nearby\": [\n        {\n          \"place_name\": \"Central Park\",\n          \"place_details\": \"A sprawling urban park with iconic attractions like the Bethesda Terrace and the Central Park Zoo.\",\n          \"place_image_url\": \"https://www.centralparknyc.org/sites/default/files/styles/hero_image/public/2019-12/central_park_winter_2019_hero.jpg?itok=8jY-i52r\",\n          \"geo_coordinates\": [40.785091, -73.968285],\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"15 minutes\"\n        },\n        {\n          \"place_name\": \"The Metropolitan Museum of Art\",\n          \"place_details\": \"One of the world's largest and finest art museums, housing a vast collection of masterpieces from around the globe.\",\n          \"place_image_url\": \"https://www.metmuseum.org/sites/default/files/styles/met_homepage_slideshow/public/2023-11/2023_11_24_met_5th_avenue_building_exterior_daytime_wide_0.jpg?itok=y525vXgI\",\n          \"geo_coordinates\": [40.779440, -73.963215],\n          \"ticket_pricing\": \"Suggested donation: $25\",\n          \"time_to_travel\": \"20 minutes\"\n        }\n      ]\n    },\n    {\n      \"hotel_name\": \"The St. Regis New York\",\n      \"hotel_address\": \"2 E 55th St, New York, NY 10022, USA\",\n      \"price\": \"$1200\",\n      \"hotel_image_url\": \"https://www.marriott.com/marriott/media/images/global/hotels/nycsr/nycsr-exterior-hotel-736h.jpg\",\n      \"geo_coordinates\": [40.760685, -73.976526],\n      \"rating\": 4.7,\n      \"description\": \"A historic luxury hotel known for its elegant rooms, world-class dining, and legendary service.\",\n      \"places_to_visit_nearby\": [\n        {\n          \"place_name\": \"Rockefeller Center\",\n          \"place_details\": \"A famous entertainment complex featuring the iconic Rockefeller Center Christmas Tree and the Top of the Rock observation deck.\",\n          \"place_image_url\": \"https://www.rockefellercenter.com/sites/rockefellercenter/files/styles/hero_image/public/2022-06/rockefeller-center-fountain-summer-daytime-wide-0.jpg?itok=bJ979a5o\",\n          \"geo_coordinates\": [40.758635, -73.979070],\n          \"ticket_pricing\": \"Varies\",\n          \"time_to_travel\": \"10 minutes\"\n        },\n        {\n          \"place_name\": \"St. Patrick's Cathedral\",\n          \"place_details\": \"A majestic Neo-Gothic cathedral known for its stunning architecture and stained glass windows.\",\n          \"place_image_url\": \"https://www.stpatrickscathedral.org/sites/default/files/styles/gallery_full/public/2019-03/st-patricks-cathedral-exterior-3.jpg?itok=80u_f25C\",\n          \"geo_coordinates\": [40.761432, -73.977401],\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"5 minutes\"\n        }\n      ]\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"activities\": [\n        {\n          \"activity\": \"Check in to the hotel\",\n          \"time\": \"12:00 PM\"\n        },\n        {\n          \"activity\": \"Lunch at The Palm Court\",\n          \"time\": \"1:00 PM\"\n        },\n        {\n          \"activity\": \"Visit Central Park\",\n          \"time\": \"2:00 PM\"\n        },\n        {\n          \"activity\": \"Dinner at The Grill\",\n          \"time\": \"7:00 PM\"\n        },\n        {\n          \"activity\": \"Enjoy a show at Broadway\",\n          \"time\": \"8:00 PM\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"activities\": [\n        {\n          \"activity\": \"Breakfast at The Palm Court\",\n          \"time\": \"9:00 AM\"\n        },\n        {\n          \"activity\": \"Visit The Metropolitan Museum of Art\",\n          \"time\": \"10:00 AM\"\n        },\n        {\n          \"activity\": \"Lunch at The Loeb Boathouse\",\n          \"time\": \"1:00 PM\"\n        },\n        {\n          \"activity\": \"Check out of the hotel\",\n          \"time\": \"2:00 PM\"\n        },\n        {\n          \"activity\": \"Head to the airport for your return flight\",\n          \"time\": \"3:00 PM\"\n        }\n      ]\n    }\n  ]\n}"},
            ],
          },
          {
            role: "model",
            parts: [
              {text: "```json\n{\n  \"flight_details\": [\n    {\n      \"airline\": \"This field requires user input.  Example: British Airways\",\n      \"flight_number\": \"This field requires user input. Example: BA1234\",\n      \"departure_airport\": \"This field requires user input. Example:  JFK (New York)\",\n      \"arrival_airport\": \"This field requires user input. Example: LHR (London Heathrow)\",\n      \"departure_time\": \"This field requires user input. Example: 2024-03-15T14:00:00Z\",\n      \"arrival_time\": \"This field requires user input. Example: 2024-03-16T08:00:00Z\",\n      \"flight_price\": \"This field requires user input. Example: £1000\",\n      \"booking_url\": \"This field requires user input. Example: https://www.britishairways.com/\"\n    }\n  ],\n  \"hotels\": [\n    {\n      \"hotel_name\": \"The Savoy\",\n      \"hotel_address\": \"Strand, London WC2R 0EZ, United Kingdom\",\n      \"price\": \"£1500\",\n      \"hotel_image_url\": \"https://www.thesavoylondon.com/sites/default/files/styles/hero_image/public/2023-10/savoy-exterior-night.jpg?itok=68p-X7y-\",\n      \"geo_coordinates\": [51.5074, -0.1262],\n      \"rating\": 4.8,\n      \"description\": \"Iconic luxury hotel on the Strand with stunning views of the Thames.\",\n      \"places_to_visit_nearby\": [\n        {\n          \"place_name\": \"London Eye\",\n          \"place_details\": \"Giant Ferris wheel offering panoramic views of London.\",\n          \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/London_Eye_from_the_South_Bank.jpg/1280px-London_Eye_from_the_South_Bank.jpg\",\n          \"geo_coordinates\": [51.5033, -0.1195],\n          \"ticket_pricing\": \"£30 - £40\",\n          \"time_to_travel\": \"15 minutes\"\n        },\n        {\n          \"place_name\": \"Houses of Parliament & Big Ben\",\n          \"place_details\": \"Iconic clock tower and seat of the UK government.\",\n          \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Houses_of_Parliament_and_Elizabeth_Tower_04-11-2017.jpg/800px-Houses_of_Parliament_and_Elizabeth_Tower_04-11-2017.jpg\",\n          \"geo_coordinates\": [51.5007, -0.1246],\n          \"ticket_pricing\": \"Free (exterior viewing)\",\n          \"time_to_travel\": \"20 minutes\"\n        }\n      ]\n    },\n    {\n      \"hotel_name\": \"The Dorchester\",\n      \"hotel_address\": \"39 Park Ln, Mayfair, London W1K 1HN, United Kingdom\",\n      \"price\": \"£1200\",\n      \"hotel_image_url\": \"https://dynamic-media.cdn.cnn.com/api/v1/images/20201211180832-the-dorchester-london-hotel-exterior.jpg?c=16x9&size=1200x675\",\n      \"geo_coordinates\": [51.5090, -0.1522],\n      \"rating\": 4.7,\n      \"description\": \"Luxury hotel in Mayfair known for its elegance and afternoon tea.\",\n      \"places_to_visit_nearby\": [\n        {\n          \"place_name\": \"Hyde Park\",\n          \"place_details\": \"Large park in Central London with Serpentine Lake and Kensington Gardens.\",\n          \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Hyde_Park_02.jpg/1280px-Hyde_Park_02.jpg\",\n          \"geo_coordinates\": [51.51, -0.17],\n          \"ticket_pricing\": \"Free\",\n          \"time_to_travel\": \"10 minutes\"\n        },\n        {\n          \"place_name\": \"Buckingham Palace\",\n          \"place_details\": \"Official residence of the Queen.\",\n          \"place_image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Buckingham_Palace_exterior.jpg/800px-Buckingham_Palace_exterior.jpg\",\n          \"geo_coordinates\": [51.5014, -0.1419],\n          \"ticket_pricing\": \"Varies (tours available only when the Queen is not in residence)\",\n          \"time_to_travel\": \"25 minutes\"\n        }\n      ]\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"activities\": [\n        {\n          \"activity\": \"Arrive at London Airport (LHR), transfer to Hotel\",\n          \"time\": \"08:00 AM\"\n        },\n        {\n          \"activity\": \"Check in to Hotel, Relax\",\n          \"time\": \"09:30 AM\"\n        },\n        {\n          \"activity\": \"Afternoon Tea at hotel or a high-end tea room\",\n          \"time\": \"12:00 PM\"\n        },\n        {\n          \"activity\": \"Visit London Eye & Houses of Parliament\",\n          \"time\": \"02:00 PM\"\n        },\n        {\n          \"activity\": \"Dinner at a Michelin-starred restaurant\",\n          \"time\": \"07:00 PM\"\n        },\n        {\n          \"activity\": \"Evening stroll along the Thames\",\n          \"time\": \"09:00 PM\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"activities\": [\n        {\n          \"activity\": \"Breakfast at hotel\",\n          \"time\": \"08:00 AM\"\n        },\n        {\n          \"activity\": \"Visit Buckingham Palace & Hyde Park\",\n          \"time\": \"09:00 AM\"\n        },\n        {\n          \"activity\": \"Lunch at a fine-dining restaurant in Mayfair\",\n          \"time\": \"01:00 PM\"\n        },\n        {\n          \"activity\": \"Shopping or museum visit (depending on interests)\",\n          \"time\": \"02:30 PM\"\n        },\n        {\n          \"activity\": \"Check out of hotel and Transfer to LHR for flight\",\n          \"time\": \"05:00 PM\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Note:**  This JSON provides a template.  You MUST replace the placeholders (indicated by \"This field requires user input...\") with your actual flight and trip details.  The prices are estimates and may vary greatly depending on the season and availability.  Remember to book flights and hotels in advance, especially for a luxury trip.  Also consider purchasing tickets for attractions online to avoid queues.\n"},
            ],
          },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
  
  